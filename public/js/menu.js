(async function(){\n  const menuUrl = '/public/data/menu.json';\n  const data = await fetch(menuUrl).then(r=>r.json());\n  const items = data.items || [];\n\n  const langSelect = document.getElementById('langSelect');\n  let lang = langSelect.value || 'pt';\n  langSelect.addEventListener('change', e=>{ lang = e.target.value; render(); });\n\n  const categoriesEl = document.getElementById('categories');\n  const cardsEl = document.getElementById('cards');\n\n  const categories = ['all',...Array.from(new Set(items.map(i=>i.category)))];\n  categories.forEach(cat=>{\n    const btn = document.createElement('button');\n    btn.textContent = cat === 'all' ? (lang==='pt'? 'Todos':'All') : cat;\n    btn.addEventListener('click', ()=> render(cat));\n    categoriesEl.appendChild(btn);\n  });\n\n  function formatName(item){ return item.name[lang] || item.name.pt; }\n  function formatShort(item){ return item.short[lang] || item.short.pt || ''; }\n\n  function render(filter){\n    cardsEl.innerHTML = '';\n    const list = items.filter(i=> !filter || filter==='all' ? true : i.category===filter );\n    list.forEach(item=>{\n      const card = document.createElement('article');\n      card.className = 'card';\n      const img = document.createElement('img'); img.src = '/' + item.image; img.alt = formatName(item);\n      const body = document.createElement('div'); body.className = 'card-body';\n      const title = document.createElement('h3'); title.className = 'card-title'; title.textContent = formatName(item);\n      const short = document.createElement('div'); short.className = 'card-short'; short.textContent = formatShort(item);\n      const footer = document.createElement('div'); footer.className = 'card-footer';\n      const price = document.createElement('div'); price.className = 'price'; price.textContent = 'QAR ' + item.price_qar;\n      const more = document.createElement('button'); more.className = 'btn-more'; more.textContent = (lang==='pt'?'Mais':'More');\n      more.addEventListener('click', ()=> openModal(item));\n      footer.appendChild(price); footer.appendChild(more);\n      body.appendChild(title); body.appendChild(short); body.appendChild(footer);\n      card.appendChild(img); card.appendChild(body);\n      cardsEl.appendChild(card);\n    });\n  }\n\n  // Modal\n  const modal = document.getElementById('modal');\n  const modalContent = document.getElementById('modalContent');\n  document.getElementById('modalClose').addEventListener('click', closeModal);\n  modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });\n\n  function openModal(item){\n    modal.classList.remove('hidden'); modal.setAttribute('aria-hidden','false');\n    const html = [];\n    html.push(`<img src='/${item.image}' alt='${item.name[lang] || item.name.pt}' />`);\n    html.push(`<h2>${item.name[lang] || item.name.pt} <span style="float:right;font-weight:700;color:#8b3e2f">QAR ${item.price_qar}</span></h2>`);\n    html.push(`<p>${item.description[lang] || item.description.pt}</p>`);\n    // allergies\n    html.push('<div class="allergies">');\n    for(const key of ['gluten','lactose','nuts','egg','fish','soy']){\n      const has = item.allergies && item.allergies[key];\n      html.push(`<div class="allergy"><img src="/public/icons/${key}.svg" alt="${key}"><span>${key}: ${has? (lang==='pt'?'Sim':'Yes') : (lang==='pt'?'Não':'No')}</span></div>`);\n    }\n    html.push('</div>');\n    // nutrition\n    html.push('<div class="nutrition"><h4>' + (lang==='pt'?'Informação Nutricional':'Nutrition Facts') + '</h4>');\n    html.push('<table>');\n    html.push(`<tr><td>kcal</td><td>${item.nutrition.kcal}</td></tr>`);\n    html.push(`<tr><td>carbs (g)</td><td>${item.nutrition.carbs_g}</td></tr>`);\n    html.push(`<tr><td>fiber (g)</td><td>${item.nutrition.fiber_g}</td></tr>`);\n    html.push(`<tr><td>protein (g)</td><td>${item.nutrition.protein_g}</td></tr>`);\n    html.push(`<tr><td>fat (g)</td><td>${item.nutrition.fat_g}</td></tr>`);\n    html.push('</table></div>');\n\n    modalContent.innerHTML = html.join('');\n  }\n  function closeModal(){ modal.classList.add('hidden'); modal.setAttribute('aria-hidden','true'); }\n\n  render();\n})();